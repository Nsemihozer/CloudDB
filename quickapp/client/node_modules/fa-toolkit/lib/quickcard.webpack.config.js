"use strict";var _0x4aaf37=_0x3103;function _typeof(t){var r=_0x3103;return(_typeof=r(208)==typeof Symbol&&r(276)==typeof Symbol[r(312)]?function(t){return typeof t}:function(t){var e=r;return t&&e(208)==typeof Symbol&&t[e(293)]===Symbol&&t!==Symbol[e(216)]?e(276):typeof t})(t)}function _regeneratorRuntime(){var f=_0x3103,s=(_regeneratorRuntime=function(){return s},{}),t=Object.prototype,c=t[f(290)],e=f(208)==typeof Symbol?Symbol:{},i=e.iterator||f(291),r=e[f(313)]||f(324),n=e.toStringTag||f(328);function a(t,e,r){return Object[f(268)](t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(t){a=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var a,i,o,s,u,c=f,e=e&&e[c(216)]instanceof h?e:h,e=Object[c(202)](e.prototype),n=new x(n||[]);return e[c(215)]=(a=t,i=r,o=n,u=(s=c)(284),function(t,e){var r=s;if("executing"===u)throw new Error(r(203));if(r(282)===u){if("throw"===t)throw e;return w()}for(o[r(250)]=t,o[r(265)]=e;;){var n=o.delegate;if(n){n=function t(e,r){var n=f,a=e[n(312)][r[n(250)]];if(void 0===a){if(r[n(262)]=null,"throw"===r[n(250)]){if(e[n(312)][n(252)]&&(r.method="return",r[n(265)]=void 0,t(e,r),n(286)===r[n(250)]))return p;r.method="throw",r[n(265)]=new TypeError("The iterator does not provide a 'throw' method")}return p}a=l(a,e[n(312)],r.arg);if(n(286)===a.type)return r[n(250)]=n(286),r[n(265)]=a.arg,r.delegate=null,p;a=a[n(265)];return a?a[n(316)]?(r[e.resultName]=a[n(206)],r[n(289)]=e[n(255)],n(252)!==r[n(250)]&&(r[n(250)]=n(289),r[n(265)]=void 0),r.delegate=null,p):a:(r[n(250)]=n(286),r[n(265)]=new TypeError("iterator result is not an object"),r[n(262)]=null,p)}(n,o);if(n){if(n===p)continue;return n}}if(r(289)===o[r(250)])o.sent=o[r(220)]=o[r(265)];else if(r(286)===o.method){if(r(284)===u)throw u="completed",o[r(265)];o[r(311)](o[r(265)])}else"return"===o[r(250)]&&o.abrupt(r(252),o[r(265)]);u=r(306);n=l(a,i,o);if(r(307)===n[r(269)]){if(u=o.done?r(282):"suspendedYield",n[r(265)]===p)continue;return{value:n[r(265)],done:o.done}}"throw"===n[r(269)]&&(u="completed",o[r(250)]=r(286),o[r(265)]=n.arg)}}),e}function l(t,e,r){var n=f;try{return{type:n(307),arg:t.call(e,r)}}catch(t){return{type:n(286),arg:t}}}s[f(332)]=u;var p={};function h(){}function o(){}function v(){}var e={},d=(a(e,i,function(){return this}),Object[f(214)]),d=d&&d(d(P([]))),g=(d&&d!==t&&c[f(285)](d,i)&&(e=d),v[f(216)]=h[f(216)]=Object[f(202)](e));function _(t){["next","throw",f(252)].forEach(function(e){a(t,e,function(t){return this[_0x3103(215)](e,t)})})}function m(s,u){var e,a=f;this[a(215)]=function(r,n){function t(){return new u(function(t,e){!function e(t,r,n,a){var i,o=_0x3103,t=l(s[t],s,r);if(o(286)!==t[o(269)])return(r=(i=t[o(265)])[o(206)])&&o(310)==_typeof(r)&&c[o(285)](r,o(256))?u[o(240)](r.__await)[o(243)](function(t){e("next",t,n,a)},function(t){e("throw",t,n,a)}):u[o(240)](r)[o(243)](function(t){i[o(206)]=t,n(i)},function(t){return e(o(286),t,n,a)});a(t[o(265)])}(r,n,t,e)})}return e=e?e[a(243)](t,t):t()}}function y(t){var e=f,r={tryLoc:t[0]};1 in t&&(r[e(275)]=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this[e(236)][e(249)](r)}function b(t){var e=f,r=t[e(278)]||{};r.type=e(307),delete r[e(265)],t.completion=r}function x(t){var e=f;this[e(236)]=[{tryLoc:e(294)}],t.forEach(y,this),this[e(331)](!0)}function P(r){var n=f;if(r){var a,t=r[i];if(t)return t[n(285)](r);if(n(208)==typeof r[n(289)])return r;if(!isNaN(r[n(283)]))return a=-1,(t=function t(){for(var e=n;++a<r[e(283)];)if(c[e(285)](r,a))return t.value=r[a],t[e(316)]=!1,t;return t[e(206)]=void 0,t[e(316)]=!0,t})[n(289)]=t}return{next:w}}function w(){return{value:void 0,done:!0}}return a(g,"constructor",o.prototype=v),a(v,f(293),o),o[f(271)]=a(v,n,f(317)),s[f(288)]=function(t){var e=f,t=e(208)==typeof t&&t[e(293)];return!!t&&(t===o||e(317)===(t[e(271)]||t[e(321)]))},s[f(228)]=function(t){var e=f;return Object[e(235)]?Object.setPrototypeOf(t,v):(t.__proto__=v,a(t,n,e(317))),t[e(216)]=Object[e(202)](g),t},s[f(325)]=function(t){return{__await:t}},_(m.prototype),a(m[f(216)],r,function(){return this}),s[f(244)]=m,s[f(300)]=function(t,e,r,n,a){var i=f,o=(void 0===a&&(a=Promise),new m(u(t,e,r,n),a));return s[i(288)](e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},_(g),a(g,n,f(258)),a(g,i,function(){return this}),a(g,f(227),function(){return f(281)}),s.keys=function(n){var t,a=f,i=[];for(t in n)i.push(t);return i[a(314)](),function t(){for(var e=a;i[e(283)];){var r=i[e(336)]();if(r in n)return t[e(206)]=r,t[e(316)]=!1,t}return t[e(316)]=!0,t}},s.values=P,x[f(216)]={constructor:x,reset:function(t){var e=f;if(this.prev=0,this.next=0,this[e(217)]=this[e(220)]=void 0,this.done=!1,this[e(262)]=null,this[e(250)]=e(289),this[e(265)]=void 0,this[e(236)][e(245)](b),!t)for(var r in this)"t"===r[e(193)](0)&&c[e(285)](this,r)&&!isNaN(+r[e(253)](1))&&(this[r]=void 0)},stop:function(){var t=f,e=(this.done=!0,this[t(236)][0].completion);if(t(286)===e.type)throw e.arg;return this[t(326)]},dispatchException:function(n){var a=f;if(this[a(316)])throw n;var i=this;function t(t,e){var r=a;return o.type=r(286),o.arg=n,i[r(289)]=t,e&&(i.method=r(289),i[r(265)]=void 0),!!e}for(var e=this[a(236)][a(283)]-1;0<=e;--e){var r=this.tryEntries[e],o=r[a(278)];if(a(294)===r[a(318)])return t(a(230));if(r[a(318)]<=this[a(223)]){var s=c.call(r,a(275)),u=c[a(285)](r,a(323));if(s&&u){if(this.prev<r.catchLoc)return t(r[a(275)],!0);if(this.prev<r.finallyLoc)return t(r.finallyLoc)}else if(s){if(this[a(223)]<r[a(275)])return t(r[a(275)],!0)}else{if(!u)throw new Error(a(319));if(this[a(223)]<r[a(323)])return t(r[a(323)])}}}},abrupt:function(t,e){for(var r=f,n=this[r(236)][r(283)]-1;0<=n;--n){var a=this[r(236)][n];if(a[r(318)]<=this.prev&&c[r(285)](a,"finallyLoc")&&this[r(223)]<a[r(323)]){var i=a;break}}var o=(i=i&&(r(292)===t||r(205)===t)&&i[r(318)]<=e&&e<=i[r(323)]?null:i)?i[r(278)]:{};return o.type=t,o.arg=e,i?(this.method=r(289),this[r(289)]=i[r(323)],p):this[r(304)](o)},complete:function(t,e){var r=f;if(r(286)===t[r(269)])throw t.arg;return"break"===t.type||r(205)===t[r(269)]?this[r(289)]=t[r(265)]:"return"===t[r(269)]?(this[r(326)]=this[r(265)]=t[r(265)],this.method=r(252),this[r(289)]="end"):r(307)===t[r(269)]&&e&&(this[r(289)]=e),p},finish:function(t){for(var e=f,r=this[e(236)][e(283)]-1;0<=r;--r){var n=this[e(236)][r];if(n[e(323)]===t)return this[e(304)](n[e(278)],n[e(211)]),b(n),p}},catch:function(t){for(var e=f,r=this.tryEntries[e(283)]-1;0<=r;--r){var n,a,i=this[e(236)][r];if(i[e(318)]===t)return"throw"===(n=i[e(278)]).type&&(a=n[e(265)],b(i)),a}throw new Error(e(298))},delegateYield:function(t,e,r){var n=f;return this[n(262)]={iterator:P(t),resultName:e,nextLoc:r},n(289)===this.method&&(this[n(265)]=void 0),p}},s}function asyncGeneratorStep(t,e,r,n,a,i,o){var s=_0x3103;try{var u=t[i](o),c=u[s(206)]}catch(t){return void r(t)}u.done?e(c):Promise[s(240)](c)[s(243)](n,a)}function _0x3103(t,e){var r=_0x516c();return(_0x3103=function(t,e){return r[t-=192]})(t,e)}function _asyncToGenerator(s){return function(){var t=this,o=arguments;return new Promise(function(e,r){var n=s.apply(t,o);function a(t){asyncGeneratorStep(n,e,r,a,i,"next",t)}function i(t){asyncGeneratorStep(n,e,r,a,i,_0x3103(286),t)}a(void 0)})}}!function(){for(var t=_0x3103,e=_0x516c();;)try{if(235331==+parseInt(t(239))+-parseInt(t(267))/2+-parseInt(t(234))/3*(parseInt(t(274))/4)+parseInt(t(225))/5+parseInt(t(305))/6+parseInt(t(299))/7+-parseInt(t(320))/8*(parseInt(t(295))/9))break;e.push(e.shift())}catch(t){e.push(e.shift())}}();var fs=require("fs"),path=require(_0x4aaf37(302)),ZipPlugin=require(_0x4aaf37(329)),ScriptPlugin=require(_0x4aaf37(210)),ResourcePlugin=require("./fa-compiler/resource-plugin"),_require=require(_0x4aaf37(198)),clearResource=_require[_0x4aaf37(280)],norpk=_require.norpk,IS_PRD=_require.IS_PRD,projectPath=_require[_0x4aaf37(254)],signFlag=_require[_0x4aaf37(233)],getFlexibleCardManifestPath=_require[_0x4aaf37(238)],getFlexibleCfg=_require[_0x4aaf37(204)],isComboCard=_require[_0x4aaf37(195)],getPrivateKeyStr=_require[_0x4aaf37(246)],isPrivatePkg=_require[_0x4aaf37(251)],utils=require(_0x4aaf37(199)),webpack=require("webpack"),LoggerPlugin=require(_0x4aaf37(232)),resolve=function(){var t=_0x4aaf37;return path[t(222)][t(229)](path,arguments)},rootDir=(process[_0x4aaf37(224)]=!0,global[_0x4aaf37(209)]=[],resolve(projectPath,"src")),signPath=resolve(projectPath,_0x4aaf37(218)),zipPath=resolve(projectPath,_0x4aaf37(231)),buildPath=resolve(projectPath,_0x4aaf37(264));function generatePlugins(t){var e=_0x4aaf37;return[new ResourcePlugin({src:rootDir,build:buildPath,manifest:t}),new webpack[e(261)]({options:{srcPath:rootDir}}),new LoggerPlugin,new ScriptPlugin]}function generateModules(){var t=_0x4aaf37;return{rules:[{test:/\.js$/,use:[{loader:utils[t(335)]("babel-loader"),options:{presets:utils.getBabelPresets(),plugins:[utils[t(335)]("@babel/plugin-transform-modules-commonjs"),utils[t(335)]("@babel/plugin-proposal-class-properties"),utils[t(335)](t(337))],comments:!1}},{loader:path[t(240)](__dirname,"quickcard-compiler/module-loader.js")}]},{test:/\.(ux)(\?[^?]+)?$/,use:[{loader:path[t(240)](__dirname,t(309))}]}]}}function generateResolves(){var t=_0x4aaf37,e=[path[t(222)](__dirname,"..","node_modules"),path[t(222)](__dirname,"..","..","..",t(257)),t(257)];return isPrivatePkg()&&e[t(242)](1,1,path.join(__dirname,"..","..","..","..",t(257))),{modules:e}}function checkEntryJson(e){var r=_0x4aaf37;try{JSON.parse(fs[r(327)](e,"utf-8"))}catch(t){throw r(315)[r(212)](e)}}function getEntry(t){var f={};return t.map(function(t){var e=_0x3103,r=JSON[e(266)](fs.readFileSync(t,"utf-8")),n=r[e(279)],a=r[e(269)],i=r[e(297)],i=void 0===i?"":i,o=r[e(194)],o=void 0===o?"":o,s=r[e(303)],a=isComboCard(a),t=path[e(270)](t),u=path[e(222)](e(264),path[e(330)](t)),c=path[e(222)](t,""[e(212)](n,".").concat(a?e(263):"ux"));if(!fs.existsSync(c))throw e(241)[e(212)](c);a?(s&&(f[path.join(u,s)]={import:path[e(222)](t,""[e(212)](s,e(219))),library:{name:e(226),type:e(296)}}),_uselessAssets[e(249)](""[e(212)](path[e(222)](u,n),e(219))),_uselessAssets[e(249)]("".concat(path[e(222)](u,e(277)))),f[path[e(222)](u,e(248))]=path[e(222)](t,e(196)),checkEntryJson(c)):(s=path[e(222)](u,"".concat(n,"_script")),f[s]=path.join(t,""[e(212)](n,e(287))),f=genI18nEntry(f,r,u,t));s=""[e(212)](c,e(197));r.minPlatformVersion<1005?(f[path[e(222)](u,n)]=c,f["".concat(path[e(222)](u,n),"_1005")]=s):f[path[e(222)](u,n)]=s,f=genDataJsonEntry(f,a?o:i,u,t)}),f}function genDataJsonEntry(t,e,r,n){var a=_0x4aaf37;return e&&Object[a(216)][a(227)][a(285)](e)===a(308)&&(t[r=path[a(222)](r,e)]?(t[""[a(212)](r,a(200))]=path[a(222)](n,""[a(212)](e,a(301))),_uselessAssets[a(249)](""[a(212)](r,"_json.js"))):(t[r]=path[a(222)](n,""[a(212)](e,a(301))),_uselessAssets.push(""[a(212)](r,".js")))),t}function genI18nEntry(t,e,a,i){var o=_0x4aaf37,e=e[o(333)];if(utils.isEmptyObject(e)||utils.isEmptyObject(e[o(192)]))return t;var s=e[o(192)];return Object.keys(s)[o(272)](function(t,e){var r=o,n=path[r(222)](i,s[e]);return fs[r(273)](n)&&(e=path[r(334)](s[e]).replace(/\.js$/g,""),t[e=path[r(222)](a,e)]=n,_uselessAssets[r(249)](""[r(212)](e,r(219)))),t},t)}function getWebpackCfg(t){return _getWebpackCfg[_0x4aaf37(229)](this,arguments)}function _getWebpackCfg(){var e=_0x4aaf37;return(_getWebpackCfg=_asyncToGenerator(_regeneratorRuntime()[e(228)](function t(r){var n,a,i,o,s,u=e;return _regeneratorRuntime()[u(332)](function(t){for(var e=u;;)switch(t.prev=t[e(289)]){case 0:return n={},t[e(289)]=3,clearResource([zipPath,buildPath]);case 3:if(a=getPrivateKeyStr(r),i=getEntry(getFlexibleCardManifestPath()),o=getFlexibleCfg()[e(207)]||"dist",utils[e(259)](i))throw e(201);t[e(289)]=8;break;case 8:return s={mode:"production",devtool:!1,entry:i,output:{path:path[e(222)](projectPath),filename:e(221)},module:generateModules(),plugins:generatePlugins(n),node:{global:!1},stats:e(213),resolve:generateResolves(),optimization:{noEmitOnErrors:!1,minimize:!0}},norpk||s[e(260)][e(249)](new ZipPlugin({name:o,sourceRoot:rootDir,signRoot:signPath,output:zipPath,buildPath:buildPath,sign:signFlag,privateKeyStr:a,IS_PRD:IS_PRD})),t[e(237)](e(252),s);case 11:case e(230):return t[e(322)]()}},t)})))[e(229)](this,arguments)}function _0x516c(){var t=["./quickcard-compiler/fa-zip-plugin","basename","reset","wrap","language","normalize","loadBabelModule","pop","@babel/plugin-proposal-object-rest-spread","support","charAt","data","isComboCard","manifest.json","?jsVm=true","./common/utils","./fa-compiler/utils","_json","ERROR: The project structure is invalid.","create","Generator is already running","getFlexibleCfg","continue","value","projectName","function","_uselessAssets","./quickcard-compiler/script-plugin","afterLoc","concat","none","getPrototypeOf","_invoke","prototype","sent","sign",".js","_sent","[name].js","join","prev","noDeprecation","2264855oIlpAx","__fl_module_exports__","toString","mark","apply","end","dist","./common/logger-plugin","signFlag","60267NXdmyD","setPrototypeOf","tryEntries","abrupt","getFlexibleCardManifestPath","196153JFhrnf","resolve","ERROR: Can not resolve file: ","splice","then","AsyncIterator","forEach","getPrivateKeyStr","exports","manifest","push","method","isPrivatePkg","return","slice","PROJECT_PATH","nextLoc","__await","node_modules","Generator","isEmptyObject","plugins","LoaderOptionsPlugin","delegate","json","build","arg","parse","845692PQZLzd","defineProperty","type","dirname","displayName","reduce","existsSync","64dkcqAL","catchLoc","symbol","manifest.js","completion","entry","clearResource","[object Generator]","completed","length","suspendedStart","call","throw",".ux?isScript=true","isGeneratorFunction","next","hasOwnProperty","@@iterator","break","constructor","root","524484IlivlM","var","testData","illegal catch attempt","1381191pfaGwd","async",".json","path","script","complete","1148640jMcTEw","executing","normal","[object String]","quickcard-compiler/loader.js","object","dispatchException","iterator","asyncIterator","reverse","ERROR: The file format is incorrect: ","done","GeneratorFunction","tryLoc","try statement without catch or finally","8pbBJKa","name","stop","finallyLoc","@@asyncIterator","awrap","rval","readFileSync","@@toStringTag"];return(_0x516c=function(){return t})()}module[_0x4aaf37(247)]=getWebpackCfg;