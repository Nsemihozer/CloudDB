"use strict";var _system=_interopRequireDefault(require("@system.router")),_system2=_interopRequireDefault(require("@system.storage")),_system3=_interopRequireDefault(require("@system.prompt")),_mocha2=require("mocha/mocha.js"),_chai=require("chai");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var g=Object.getPrototypeOf(global);g.expect=_chai.expect,g.should=_chai.should,g.assert=_chai.assert,g.runTestCase=function(s,e){var a=new _mocha2.Mocha({reporter:"json",timeout:2e3});a.ui("bdd"),a.suite.emit("pre-require",g,null,a),setTimeout(function(){"function"==typeof e&&e(s);var t=a.run(function(){var e;t&&(0<(e=a.suite.suites&&a.suite.suites).length&&(t.testResults.stats.title=e.map(function(e){return e.title}).join(",")),_system2.default.set({key:"pageTestList",value:JSON.stringify(t.testResults),success:function(){var e=t.testResults.stats;s.$page.setTitleBar({text:"通过/全部: ".concat(e.passes,"/").concat(e.tests)})},fail:function(e,t){_system3.default.showToast({message:"set fail --- ".concat(t,":").concat(e)}),console.info("set fail --- ".concat(t,":").concat(e))},complete:function(){console.info("set complete")}})),"false"!==s.back&&(console.info("All associated test cases are tested, return to the previous page."),_system.default.back())})},1e3)};