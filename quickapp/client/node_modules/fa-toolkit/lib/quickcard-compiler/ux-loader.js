"use strict";var _0x416c0a=_0x5556;function _0x5556(e,t){var r=_0x5e3c();return(_0x5556=function(e,t){return r[e-=363]})(e,t)}function ownKeys(r,e){var t,n=_0x5556,a=Object.keys(r);return Object.getOwnPropertySymbols&&(t=Object[n(368)](r),e&&(t=t[n(393)](function(e){var t=n;return Object[t(374)](r,e)[t(369)]})),a[n(414)][n(396)](a,t)),a}function _objectSpread(r){for(var n=_0x5556,e=1;e<arguments[n(468)];e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(a),!0)[n(461)](function(e){_defineProperty(r,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a))[n(461)](function(e){var t=n;Object[t(413)](r,e,Object[t(374)](a,e))})}return r}function _defineProperty(e,t,r){var n=_0x5556;return t in e?Object[n(413)](e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(){for(var e=_0x5556,t=_0x5e3c();;)try{if(201722==+parseInt(e(387))+-parseInt(e(452))/2+parseInt(e(392))/3*(parseInt(e(412))/4)+-parseInt(e(417))/5*(parseInt(e(380))/6)+-parseInt(e(409))/7+-parseInt(e(446))/8+parseInt(e(445))/9)break;t.push(t.shift())}catch(e){t.push(t.shift())}}();var loaderUtils=require(_0x416c0a(467)),path=require(_0x416c0a(411)),fs=require("fs"),parser=require("../fa-compiler/parser"),utils=require(_0x416c0a(436)),validator=require("../fa-compiler/template/validator"),expandUtil=require("./expand-util"),packagerVersion=require("../../package.json")[_0x416c0a(432)];function loader(i,e,t){var r,u=_0x416c0a,t=_objectSpread(_objectSpread({},t),loaderUtils[u(441)](i[u(365)]||"?")),n=t[u(465)],a=t[u(383)],o=t[u(399)],s=t[u(418)],c=void 0!==s&&s,l=i[u(455)],p=i[u(388)],s=path[u(382)](".",l),n=n?s:a||utils[u(400)](l),d=getPathList(i),s=getManifestPath(i,d),f=getQuickCardEntry(s),m=isQuickCardEntry(i,o,f,d),_=(f[u(398)]("/")&&(f=f.split("/")[u(454)]()),validator.default.isReservedTag(n)&&utils[u(426)](i,[{reason:"ERROR: The file name must not contain reserved character: ".concat(n)}]),""),g=parser[u(437)](e),h=[];0<g[u(427)][u(468)]&&(r=depsCount(g[u(427)]),0<(O=Object.keys(r).filter(function(e){return 1<r[e]}))[u(468)]&&utils[u(426)](i,[{reason:"ERROR: Duplicate named components exist: "[u(456)](O[u(377)](function(e){return"<"[u(456)](e,">")})[u(430)](", "))}]));for(var b=0;b<g[u(427)].length;b++){var v=g[u(427)][b];if(!v[u(405)])return utils[u(426)](i,[{reason:"ERROR: To import components, you need to set attribute `src`."}]),"";v[u(383)]||(v[u(383)]=utils[u(400)](v[u(405)])),v[u(383)]=v[u(383)].toLowerCase()[u(386)](),v[u(383)]!==f&&!validator.default[u(370)](v[u(383)])||utils[u(426)](i,[{reason:u(460)+u(433)[u(456)](v[u(383)])}]);var y=v.src,x=path[u(430)](path.dirname(l),y);if(!fs[u(462)](x)||fs.statSync(x)[u(364)]()){if(!fs[u(462)](""[u(456)](x,u(435))))return utils[u(426)](i,[{reason:"ERROR: Import file does not exist, file path : "[u(456)](x)}]),"";y=""[u(456)](y,".ux")}var $=utils[u(385)](u(402),{source:v[u(405)]}),v=getComponentName(v,x,p),j=(Boolean(c)&&((j=findComp(x,p))&&j!==v&&delete _dependComponents[j],_dependComponents[v]={context:p,filePath:x}),h[u(414)](v),"".concat(y,u(381))[u(456)](v,u(459))[u(456)](c)),x=utils[u(406)](i,$,j);_+=x}if(Boolean(c))return 0===g[u(427)].length&&"component"!==o?parser.extractBlocks(e,u(378))[u(451)](function(t){var r=u,t=Array[r(444)](t)&&t[0]||{content:""};try{var e,n=require(r(448))[r(453)](i,t[r(457)]);if(""===n)return e=path[r(430)](r(423),d[0]||"","".concat(f,r(464))),_uselessAssets[r(414)](e),"";var a=require(r(434)),o=a[r(410)](n),s=a.transformFromAst(o,null,{presets:utils[r(447)](),plugins:[utils.loadBabelModule(r(371)),utils.loadBabelModule(r(419)),utils.loadBabelModule("@babel/plugin-proposal-object-rest-spread"),utils.loadBabelModule("babel-plugin-transform-remove-strict-mode")],comments:!1});return""[r(456)](s[r(389)],r(415))}catch(e){t=e[r(395)];return utils[r(426)](i,[{reason:"ERROR: "[r(456)](t)}]),""}}):(0<g[u(373)][u(468)]&&(O=l,(e=g[u(373)][0])[u(405)]&&(O=e[u(405)]),o=""[u(456)](o===u(402)?a:f),a=utils[u(385)](u(373),{source:e[u(405)],isQcardEntry:m}),_+="var "[u(456)](o," = ").concat(utils[u(406)](i,a,O)),m?(_+="\n$qc_global_data$.$"[u(456)](o,u(404))[u(456)](o,";\n"),Object[u(372)](expandUtil).forEach(function(e){_+=expandUtil[e]})):_+=u(375)[u(456)](o,u(391))[u(456)](o,u(384))),_);if(g[u(458)][u(468)]&&(e=g[u(458)][u(393)](function(e){return!h.includes(e)}),0<(a=0<h[u(468)]?e[u(393)](function(r){var n=u;return h[n(416)](function(e){var t=n;return!e[t(424)](new RegExp("(^"[t(456)](r,t(429))[t(456)](r,"_)"),"g"))})}):g.depends).length&&utils.logWarn(i,[{reason:u(376)+""[u(456)](a[u(377)](function(e){return"<"[u(456)](e,">")})[u(430)](", "))}])),!Boolean(c)&&!g[u(438)][u(468)])return utils[u(426)](i,[{reason:u(469)}]),"";var O=g[u(438)][0],o=l,O=(O.src&&(o=O.src),_+=u(463)[u(456)](utils[u(406)](i,utils[u(385)](u(438),{source:O[u(405)]},null,h[u(430)](","),t),o)),g.style[u(468)]&&(e=l,(a=g.style[0]).src&&(e=a[u(405)]),O=path[u(430)](path[u(390)](l),a[u(405)]||"").replace(/\\/g,"/"),a.src?(o=utils[u(385)]("style",{source:1,lang:a.lang},null,null,t),o=loaderUtils.stringifyRequest(i,"!!".concat(o,"!")[u(456)](O)),_+="var $app_style$ = require(".concat(o,");\n")):_+=u(443).concat(utils[u(406)](i,utils[u(385)]("style",{source:a[u(405)],lang:a[u(440)],resourcePath:l},null,null,t),e))),_+="\n$app_define$('@app-component/"[u(456)](n,u(428)),utils.stringifyLoaders([{name:path[u(422)](__dirname,"..","fa-compiler","fa-manifest-loader.js")}])),o=utils.makeRequireString(i,O,s),_=_+u(466).concat(o)+"     $app_module$.exports.template = $app_template$\n";return 0<g[u(407)][u(468)]&&(_+=u(403)),_+=u(363),m&&(_+=u(421)[u(456)](n,"',")+u(366)[u(456)](packagerVersion,u(401))),_}function getComponentName(e,t,r){var n=_0x416c0a,a=e.name,o=Object[n(372)](_dependComponents);return o.includes(a)&&((r=findComp(t,r))?a=r:_dependComponents[a][n(397)]!==t&&(r=o[n(393)](function(e){var t=n;return e[t(379)](""[t(456)](a,"_"))}).length,a="".concat(e.name,"_")[n(456)](r+1))),a}function findComp(r,n){var a=_0x416c0a;return Object[a(372)](_dependComponents)[a(408)](function(e){var t=a,e=_dependComponents[e];return e[t(397)]===r&&e[t(388)]===n})}function getManifestPath(e,t){var r=_0x416c0a,e=e[r(431)][r(442)];return path[r(430)](e,t[0]||"",r(450))}function getPathList(e){var t=_0x416c0a,r=e[t(431)][t(442)];return path[t(382)](r,e[t(388)])[t(420)](path[t(425)])}function getQuickCardEntry(e){var t=_0x416c0a;return fs[t(462)](e)?JSON[t(410)](fs[t(367)](e,t(439))).entry:""}function isQuickCardEntry(e,t,r,n){var a=_0x416c0a,o=e[a(431)][a(442)],o=path.join(o,n[0]||"");return path.relative(o,e[a(455)])[a(420)](path[a(425)])[a(430)]("/").replace(".ux","")===r&&"component"!==t}function depsCount(e){var t=_0x416c0a;return 0<e.length&&e[t(377)](function(e){return e.name})[t(449)](function(e,t){return e[t]=e[t]+1||1,e},{})}function _0x5e3c(){var e=[";\n}","makeLoaderString","trim","297420nLNrxh","context","code","dirname","_base$ = function () {\n   return ","236190qIVNVr","filter","exports","message","apply","filePath","includes","type","getNameByPath","'})","component","     $app_module$.exports.style = $app_style$\n","$ = ","src","makeRequireString","style","find","310919dgLTAW","parse","path","4fVflbt","defineProperty","push","\n$qc_global_data$ = module.exports;","some","6455SXVigJ","isScript","@babel/plugin-proposal-class-properties","split","\n$app_bootstrap$('@app-component/","resolve","build","match","sep","logWarn","import","', [], function($app_require$, $app_exports$, $app_module$){\n","$)|(^","join","options","version","the reserved character or use the same as the current card entry: ","@babel/core",".ux","../fa-compiler/utils","parseFragment","template","utf-8","lang","parseQuery","srcPath","var $app_style$ = ","isArray","897939prYjjT","1564016LLmVgb","getBabelPresets","./module-loader","reduce","manifest.json","then","1428NtfCNx","call","pop","resourcePath","concat","content","depends","&isScript=","ERROR: Attribute 'name' of the imported component must not use ","forEach","existsSync","var $app_template$ = ","_script.js","entry","     $app_module$.exports.manifest = ","loader-utils","length","ERROR: The template fragment is required.","})\n","isDirectory","resourceQuery","{ packagerName:'fa-toolkit', packagerVersion: '","readFileSync","getOwnPropertySymbols","enumerable","isReservedTag","@babel/plugin-transform-modules-commonjs","keys","script","getOwnPropertyDescriptor","\n$qc_global_data$.$","WARNING: The template used one or more custom component: ","map","scripts","startsWith","156zKGefJ","?name=","relative","name"];return(_0x5e3c=function(){return e})()}module[_0x416c0a(394)]=loader;