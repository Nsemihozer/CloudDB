"use strict";var _0x5d9a05=_0x2271,_path=(!function(){for(var t=_0x2271,r=_0x2934();;)try{if(697878==-parseInt(t(135))+parseInt(t(136))/2*(parseInt(t(128))/3)+parseInt(t(152))/4+-parseInt(t(151))/5*(-parseInt(t(131))/6)+parseInt(t(156))/7*(-parseInt(t(143))/8)+-parseInt(t(149))/9*(-parseInt(t(134))/10)+-parseInt(t(137))/11*(parseInt(t(139))/12))break;r.push(r.shift())}catch(t){r.push(r.shift())}}(),require(_0x5d9a05(138))),_fs=require("fs"),_images=require(_0x5d9a05(129)),WATERMARK_PATH=_path[_0x5d9a05(150)](__dirname,"..",_0x5d9a05(144),_0x5d9a05(147)),WATERMARK_RATIO=.62;function _0x2271(t,r){var a=_0x2934();return(_0x2271=function(t,r){return a[t-=126]})(t,r)}function addWatermark(t,r){var a=_0x5d9a05;if(mkParentDir(_path[a(150)](r,"..")),_fs[a(148)](t)&&isSupportedType(t))try{var e=_images(t)[a(133)]();_images(t)[a(126)](_images(WATERMARK_PATH)[a(154)](e*WATERMARK_RATIO),0,0)[a(155)](r,{quality:100})}catch(t){throw"ERROR: The app logo of the beta version needs watermark, "+a(132)}}function isSupportedType(t){var r=_0x5d9a05,a=[r(142),r(127),r(153)],e=t.split(".").pop();if(a[r(141)](function(t){return e===t}))return!0;throw r(130)+'only support "png, jpg, jpeg" format when you build the beta version.'}function _0x2934(){var t=["32tbdtpt","assets","isDirectory","statSync","beta.png","existsSync","12138453gKWwqP","join","611690TSvSLl","5299892zTAqqN","jpeg","resize","save","942305vIJQyH","draw","jpg","58071zRqAzt","images",'ERROR: manifest.json configuration item "icon" ',"60jLDhuT","but the logo image in current project do not support adding watermarks.","width","10AZszMU","1269327XAiIsw","74aoTHNp","11591877LlCGuL","path","24hEhuRc","mkdirSync","some","png"];return(_0x2934=function(){return t})()}function mkParentDir(t){var r,a=_0x5d9a05;_fs.existsSync(t)&&_fs.statSync(t)[a(145)]()||(r=_path[a(150)](t,".."),_fs[a(148)](r)&&!_fs[a(146)](r).isFile()||mkParentDir(r),_fs[a(140)](t))}module.exports={addWatermark:addWatermark};